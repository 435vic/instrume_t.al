{{> page/nav }}

<section class="section">
    <div class="container">
        {{#if user}}
        <div class="columns is-centered">
            <div class="column is-8-tablet is-6-desktop">
                <div class="box">
                    <div class="has-text-centered mb-5">
                        <span class="icon is-large has-text-primary">
                            <i class="fas fa-user-circle fa-4x"></i>
                        </span>
                    </div>
                    <h1 class="title has-text-centered">
                    {{#if fullname }}
                        {{ fullname }}
                    {{else}}
                        Profile
                    {{/if}}
                    </h1>

                    <div class="content">
                        <table class="table is-fullwidth">
                            <tbody>
                                <tr>
                                    <th style="width: 30%;">Username</th>
                                    <td>{{user.username}}</td>
                                </tr>
                                {{#if user.fname}}
                                <tr>
                                    <th>First Name</th>
                                    <td>{{user.fname}}</td>
                                </tr>
                                {{/if}}
                                {{#if user.lname}}
                                <tr>
                                    <th>Last Name</th>
                                    <td>{{user.lname}}</td>
                                </tr>
                                {{/if}}
                                {{#if user.created_at}}
                                <tr>
                                    <th>Member Since</th>
                                    <td>{{user.created_at}}</td>
                                </tr>
                                {{/if}}
                                <tr>
                                    <th>Role</th>
                                    <td>
                                        {{#if (isAdmin user)}}
                                        <span class="tag is-danger">Administrator</span>
                                        {{else}}
                                        <span class="tag is-info">User</span>
                                        {{/if}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="buttons is-centered mt-5">
                        {{#if (isAdmin user)}}
                        <a href="/admin" class="button is-primary">
                            <span class="icon">
                                <i class="fas fa-cog"></i>
                            </span>
                            <span>Admin Panel</span>
                        </a>
                        {{/if}}
                        <a href="/logout" class="button is-danger is-light">
                            <span class="icon">
                                <i class="fas fa-sign-out-alt"></i>
                            </span>
                            <span>Log Out</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {{else}}
        <div class="columns is-centered">
            <div class="column is-6">
                <article class="message is-warning">
                    <div class="message-header">
                        <p>Not Logged In</p>
                    </div>
                    <div class="message-body has-text-centered">
                        <p class="mb-4">You need to be logged in to view this page.</p>
                        <a href="/login?return=/whoami" class="button is-primary">
                            <span class="icon">
                                <i class="fas fa-sign-in-alt"></i>
                            </span>
                            <span>Log In</span>
                        </a>
                    </div>
                </article>
            </div>
        </div>
        {{/if}}
    </div>
</section>
